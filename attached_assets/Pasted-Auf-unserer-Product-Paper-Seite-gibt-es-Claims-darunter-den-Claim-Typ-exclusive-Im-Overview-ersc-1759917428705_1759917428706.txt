Auf unserer Product-Paper-Seite gibt es Claims, darunter den Claim-Typ „exclusive“. Im Overview erscheint beim Hover über dem „exclusive“-Claim eine Anzeige, für wen dieser Claim exklusiv ist. Aktuell tritt ein Bug auf: Nach dem Neuladen der Seite zeigt der Hover teils andere, falsche Zielgruppen an (sie wechseln zwischen Reloads). Ursache ist, dass die UI die Informationen für „exclusive“ fälschlich aus der Analyse bezieht statt aus dem Info Paper. Bitte behebe den Bug so, dass die Anzeige stabil und korrekt ist.

Zielzustand: Der Hover über dem „exclusive“-Claim zeigt stets dieselbe, korrekte Zielgruppe an – konsistent über Reloads. Als einzige Datenquelle für „exclusive“ gilt das Info Paper (nicht die Analyse). Wenn im Info Paper keine „exclusive“-Informationen vorhanden sind, greift eine klare, dokumentierte Fallback-Logik.

Arbeitsauftrag:

Stelle die Datenquelle vollständig auf das Info Paper um: Alle Bezüge auf „analysis“ für den Claim-Typ „exclusive“ werden entfernt.

Etabliere eine Single Source of Truth: Beim Laden der Seite wird aus dem Info Paper eine stabile Zuordnung erstellt (eine Map von Claim-ID/Key zu den zugehörigen Zielgruppen). Diese Zuordnung wird einmal initialisiert und danach überall konsistent verwendet, insbesondere im Hover.

Sorge für SSR/CSR-Konsistenz: Die Daten müssen vor der ersten Render-Phase verfügbar sein, damit es keine Hydration-Differenzen gibt. Vermeide alles, was zu Nicht-Determinismus führt (z. B. sortiere Listen deterministisch und verzichte auf zufällige Reihenfolgen oder render-abhängige Permutationen).

Passe die Hover-Anzeige an: Die Komponente für den „exclusive“-Hover liest ausschließlich aus der oben beschriebenen Zuordnung aus dem Info Paper. Entferne jegliche Fallbacks auf die Analyse. Die Anzeige soll klar und konsistent formuliert sein (z. B. „Exklusiv für: …“) und barrierefrei funktionieren (Tooltip mit sinnvollen ARIA-Attributen).

Fallback-Verhalten: Wenn das Info Paper keine Zielgruppe für einen „exclusive“-Claim liefert, zeige entweder einen definierten Platzhalter („Exklusiv für: —“) oder unterdrücke den Tooltip – wähle eine Variante, ziehe sie konsequent durch und dokumentiere die Entscheidung. Logge in diesem Fall einmalig eine Warnung für die Entwicklerdiagnostik.

Performance und Stabilität: Erzeuge die Zuordnung in linearer Zeit beim Laden, sorge für O(1)-Lookups zur Anzeige und verwende eine deterministische Sortierung (z. B. alphabetisch mit fester Locale).

Tests:
– Unit-Tests für das Auslesen der „exclusive“-Zielgruppe aus dem Info Paper (Happy Path, fehlende Daten, verschiedene Claim-IDs/Keys, stabile Sortierung).
– Komponententests für den Hover (richtige Anzeige, unverändertes Verhalten nach mehrfachen Re-Renders/Reload-Simulationen, kein Zugriff auf Analyse-Daten, wenn Info-Paper-Daten vorhanden sind).

Bereinige Altlasten: Entferne oder refaktorisiere sämtliche Pfade, Hooks oder Selektoren, die „exclusive“-Zielgruppen aus der Analyse beziehen. Dokumentiere deutlich im Code-Kommentar, dass der „exclusive“-Hover ausschließlich das Info Paper nutzt.

QA-Checkliste (manueller Test):
– Seite laden → Hover zeigt korrekte Zielgruppen.
– Seite mehrfach neu laden → Anzeige bleibt identisch.
– Info Paper mit 0/1/mehreren Zielgruppen testen.
– SSR-Build/Hydration ohne Warnungen oder Abweichungen.
– Code-Suche bestätigt: Keine Nutzung der Analyse für „exclusive“.

Akzeptanzkriterien / Definition of Done:
– Der Hover für „exclusive“ ist deterministisch, korrekt und über Reloads stabil.
– Die einzige Datenquelle ist das Info Paper.
– Fallback-Verhalten ist implementiert, konsistent und dokumentiert.
– Alle Tests sind grün, QA-Checkliste erfüllt, PR-Beschreibung enthält die Migration von Analyse → Info Paper sowie die QA-Schritte.